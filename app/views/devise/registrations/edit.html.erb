<h3>Update My Account</h3>

<ul class="nav nav-tabs padding-16">
  <li class="active">
    <a data-toggle="tab" href="#edit-basic">
      My Info
    </a>
  </li>

  <li>
    <a data-toggle="tab" href="#edit-avatar">
      My Avatar
    </a>
  </li>

  <li>
    <a data-toggle="tab" href="#edit-settings">
      My Settings
    </a>
  </li>

  <li>
    <a data-toggle="tab" href="#edit-password">
      Password Change
    </a>
  </li>

  <li>
    <a data-toggle="tab" href="#account-cancel">
      Account Cancellation
    </a>
  </li>

</ul>



<div class="tab-content profile-edit-tab-content">
  <div id="edit-basic" class="tab-pane in active" style="padding-bottom: 3em;">

    <div class="row">
      <div class="col-lg-6">
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: {method: :put, :class => 'form-horizontal', :id => 'profileEdit'}) do |f| %>

            <%= devise_error_messages! %>

            <div class="field">
              <%= f.label :name %><br/>
              <%= f.text_field :name, autofocus: true, :class => 'form-control input-lg' %>
            </div>
            <br/>

            <div class="field">
              <%= f.label :email %><br/>
              <%= f.email_field :email, autofocus: false, :class => 'form-control input-lg' %>
            </div>
            <br/>

            <div class="field">
              <%= f.label :current_password %>
              <i style="color:lightgray">(Required. We need your CURRENT password to confirm any changes.)</i><br/>
              <%= f.password_field :current_password, autocomplete: "off", :class => 'form-control input-lg', :required => 'required' %>
            </div>
            <br/>

            <div class="actions">
              <%= f.submit "Update", :class => "btn btn-success" %>
            </div>
        <% end %>
      </div>

      <div class="col-lg-6">
        <%= image_tag current_user.avatar.url(:square) %>
      </div>

    </div>

  </div>


  <div id="edit-avatar" class="tab-pane">
    avatar
  </div>


  <div id="edit-settings" class="tab-pane">
    No settings right now.
  </div>


  <div id="edit-password" class="tab-pane">

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: {method: :put, :class => 'form-horizontal', :id => 'profileEdit'}) do |f| %>

        <%= devise_error_messages! %>


        <div class="field">
          <%= f.label 'New Password' %> <i style="color:lightgray">(leave blank if you don't want to change it)</i><br/>
          <%= f.password_field :password, autocomplete: "off", :class => 'form-control input-lg' %>
        </div>
        <br/>

        <div class="field">
          <%= f.label 'New password confirmation' %><br/>
          <%= f.password_field :password_confirmation, autocomplete: "off", :class => 'form-control input-lg' %>
        </div>
        <br/>

        <div class="field">
          <%= f.label :current_password %>
          <i style="color:lightgray">(Required. We need your CURRENT password to confirm any changes.)</i><br/>
          <%= f.password_field :current_password, autocomplete: "off", :class => 'form-control input-lg', :required => 'required' %>
        </div>
        <br/>

        <div class="actions">
          <%= f.submit "Update", :class => "btn btn-success" %>
        </div>
    <% end %>

  </div>


  <div id="account-cancel" class="tab-pane">
    <h3>Cancel my account</h3>

    <p>Unhappy? <%= button_to "Cancel my account", registration_path(resource_name), data: {confirm: "Are you sure?"}, method: :delete, :class => "btn btn-large btn-danger" %></p>

  </div>


</div>



<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>




<script type="text/javascript">

    $(document).ready(function () {

        $("#profileEdit").validate({
            rules: {
                'user[name]': {
                    required: true,
                    minlength: 3
                },
                'user[email]': {
                    required: true,
                    minlength: 8,
                    email: true
                },
                'user[current_password]': {
                    required: true,
                    minlength: 8
                }
            },

            // Messages for form validation
            messages: {
                'user[name]': {
                    required: 'Please make sure your name is filled in.'
                },
                'user[email]': {
                    required: 'Please make sure your email is filled in.',
                    email: 'Please make sure your email is VALID.'
                },
                'user[current_password]': {
                    required: 'Please enter your current password so we can validate your request.',
                    minlength: 'Password is too short.'
                }
            }
        });

    });

</script>

